name: Tests

on:
  push:
    branches: ['*']
    tags: ['v*']
  pull_request:
    branches: [main]

jobs:
  structure-tests:
    name: Plugin Structure
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Run structure tests
        run: bash tests/test-plugin-structure.sh

  api-tests:
    name: API Integration
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Run API tests
        env:
          NAVITIA_API_TOKEN: ${{ secrets.NAVITIA_API_TOKEN }}
        run: bash tests/test-api-integration.sh
